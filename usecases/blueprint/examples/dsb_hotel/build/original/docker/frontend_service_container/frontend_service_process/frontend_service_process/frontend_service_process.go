// Package main is auto-generated by gogen/namespacebuilder.go
//
// It provides funcs for instantiating the frontend_service_process namespace.
//
// To instantiate the frontend_service_process namespace, first call [New_frontend_service_process] and then either call 
// [Build] or [BuildWithParent].
// 
// See [golang.NamespaceBuilder] docs for more information about the behavior of [Build]
package main

import (
	"github.com/blueprint-uservices/blueprint/runtime/plugins/jaeger"
	"blueprint/goproc/frontend_service_process/http"
	"github.com/blueprint-uservices/blueprint/examples/dsb_hotel/workflow/hotelreservation"
	"github.com/blueprint-uservices/blueprint/runtime/plugins/golang"
	"github.com/blueprint-uservices/blueprint/runtime/plugins/opentelemetry"
	"github.com/blueprint-uservices/blueprint/runtime/plugins/slogger"
	"blueprint/goproc/frontend_service_process/grpc"
	"blueprint/goproc/frontend_service_process/ot"
	"github.com/blueprint-uservices/blueprint/runtime/core/backend"
)

// Initializes the frontend_service_process namespace by defining all of the nodes that run
// within the namespace.
//
// [Build] or [BuildWithParent] must be called on the return value of this func
// to actually build and run the nodes in the namespace.
func New_frontend_service_process(name string) *golang.NamespaceBuilder {
	b := golang.NewNamespaceBuilder(name)
	set_frontend_service_process_Args(b)
	set_frontend_service_process_Instances(b)
	set_frontend_service_process_Definitions(b)
	return b
}

// frontend_service_process requires that its arguments are either:
//  - explicitly set with [golang.NamespaceBuilder.Set]
//  - passed on the command line (if built using [golang.NamespaceBuilder.Build])
//  - are defined in parent (if built using [golang.NamespaceBuilder.BuildWithParent])
//
// The following arguments will be eagerly checked and building the namespace
// will fail if they haven't been provided:
//   frontend_service.http.bind_addr
//   jaeger.dial_addr
//   profile_service.grpc.dial_addr
//   recomd_service.grpc.dial_addr
//   reserv_service.grpc.dial_addr
//   search_service.grpc.dial_addr
//   user_service.grpc.dial_addr
//
// The following arguments are optional and a failure will only occur if the client
// tries to build a node that needs the argument to be set
func set_frontend_service_process_Args(b *golang.NamespaceBuilder) {
	b.Required("frontend_service.http.bind_addr", "Argument generated by Blueprint IR: frontend_service.http.bind_addr = AddressConfig()")
	b.Required("jaeger.dial_addr", "Argument generated by Blueprint IR: jaeger.dial_addr = AddressConfig()")
	b.Required("profile_service.grpc.dial_addr", "Argument generated by Blueprint IR: profile_service.grpc.dial_addr = AddressConfig()")
	b.Required("recomd_service.grpc.dial_addr", "Argument generated by Blueprint IR: recomd_service.grpc.dial_addr = AddressConfig()")
	b.Required("reserv_service.grpc.dial_addr", "Argument generated by Blueprint IR: reserv_service.grpc.dial_addr = AddressConfig()")
	b.Required("search_service.grpc.dial_addr", "Argument generated by Blueprint IR: search_service.grpc.dial_addr = AddressConfig()")
	b.Required("user_service.grpc.dial_addr", "Argument generated by Blueprint IR: user_service.grpc.dial_addr = AddressConfig()")
}

// When the frontend_service_process namespace is built it will automatically instantiate
// the following nodes:
//   frontend_service_process.stdoutmetriccollector
//   frontend_service_process.logger
//   search_service.grpc_client
//   jaeger.client
//   search_service.client.ot
//   search_service.client
//   profile_service.grpc_client
//   profile_service.client.ot
//   profile_service.client
//   recomd_service.grpc_client
//   recomd_service.client.ot
//   recomd_service.client
//   user_service.grpc_client
//   user_service.client.ot
//   user_service.client
//   reserv_service.grpc_client
//   reserv_service.client.ot
//   reserv_service.client
//   frontend_service
//   frontend_service.server.ot
//   frontend_service.http_server
func set_frontend_service_process_Instances(b *golang.NamespaceBuilder) {
	b.Instantiate("frontend_service_process.stdoutmetriccollector")
	b.Instantiate("frontend_service_process.logger")
	b.Instantiate("search_service.grpc_client")
	b.Instantiate("jaeger.client")
	b.Instantiate("search_service.client.ot")
	b.Instantiate("search_service.client")
	b.Instantiate("profile_service.grpc_client")
	b.Instantiate("profile_service.client.ot")
	b.Instantiate("profile_service.client")
	b.Instantiate("recomd_service.grpc_client")
	b.Instantiate("recomd_service.client.ot")
	b.Instantiate("recomd_service.client")
	b.Instantiate("user_service.grpc_client")
	b.Instantiate("user_service.client.ot")
	b.Instantiate("user_service.client")
	b.Instantiate("reserv_service.grpc_client")
	b.Instantiate("reserv_service.client.ot")
	b.Instantiate("reserv_service.client")
	b.Instantiate("frontend_service")
	b.Instantiate("frontend_service.server.ot")
	b.Instantiate("frontend_service.http_server")
}

// The frontend_service_process namespace contains definitions for instantiating
// the following nodes:
//   frontend_service
//   frontend_service.http_server
//   frontend_service.server.ot
//   frontend_service_process.logger
//   frontend_service_process.stdoutmetriccollector
//   jaeger.client
//   profile_service.client
//   profile_service.client.ot
//   profile_service.grpc_client
//   recomd_service.client
//   recomd_service.client.ot
//   recomd_service.grpc_client
//   reserv_service.client
//   reserv_service.client.ot
//   reserv_service.grpc_client
//   search_service.client
//   search_service.client.ot
//   search_service.grpc_client
//   user_service.client
//   user_service.client.ot
//   user_service.grpc_client
func set_frontend_service_process_Definitions(b *golang.NamespaceBuilder) {
	b.Define("frontend_service", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var searchService hotelreservation.SearchService
		if err := n.Get("search_service.client", &searchService); err != nil {
			return nil, err
		}
		
		var profileService hotelreservation.ProfileService
		if err := n.Get("profile_service.client", &profileService); err != nil {
			return nil, err
		}
		
		var recommendationService hotelreservation.RecommendationService
		if err := n.Get("recomd_service.client", &recommendationService); err != nil {
			return nil, err
		}
		
		var userService hotelreservation.UserService
		if err := n.Get("user_service.client", &userService); err != nil {
			return nil, err
		}
		
		var reservationService hotelreservation.ReservationService
		if err := n.Get("reserv_service.client", &reservationService); err != nil {
			return nil, err
		}
		
		return hotelreservation.NewFrontEndServiceImpl(n.Context(), searchService, profileService, recommendationService, userService, reservationService)
	})
	
	b.Define("frontend_service.http_server", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var service ot.FrontEndService_OTServerWrapperInterface
		if err := n.Get("frontend_service.server.ot", &service); err != nil {
			return nil, err
		}
		
		var serverAddr string
		if err := n.Get("frontend_service.http.bind_addr", &serverAddr); err != nil {
			return nil, err
		}
		
		return http.New_FrontEndService_HTTPServerHandler(n.Context(), service, serverAddr)
	})
	
	b.Define("frontend_service.server.ot", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var service hotelreservation.FrontEndService
		if err := n.Get("frontend_service", &service); err != nil {
			return nil, err
		}
		
		var otCollectorClient backend.Tracer
		if err := n.Get("jaeger.client", &otCollectorClient); err != nil {
			return nil, err
		}
		
		return ot.New_FrontEndService_OTServerWrapper(n.Context(), service, otCollectorClient)
	})
	
	b.Define("frontend_service_process.logger", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		return slogger.NewSLogger(n.Context())
	})
	
	b.Define("frontend_service_process.stdoutmetriccollector", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		return opentelemetry.NewStdoutMetricCollector(n.Context())
	})
	
	b.Define("jaeger.client", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var addr string
		if err := n.Get("jaeger.dial_addr", &addr); err != nil {
			return nil, err
		}
		
		return jaeger.NewJaegerTracer(n.Context(), addr)
	})
	
	b.Define("profile_service.client", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin workflow/ir_workflowservice.go
		var client hotelreservation.ProfileService
		err := n.Get("profile_service.client.ot", &client)
		return client, err
	})
	
	b.Define("profile_service.client.ot", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var client ot.ProfileService_OTServerWrapperInterface
		if err := n.Get("profile_service.grpc_client", &client); err != nil {
			return nil, err
		}
		
		var coll_client backend.Tracer
		if err := n.Get("jaeger.client", &coll_client); err != nil {
			return nil, err
		}
		
		return ot.New_ProfileService_OTClientWrapper(n.Context(), client, coll_client)
	})
	
	b.Define("profile_service.grpc_client", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var addr string
		if err := n.Get("profile_service.grpc.dial_addr", &addr); err != nil {
			return nil, err
		}
		
		return grpc.New_ProfileService_GRPCClient(n.Context(), addr)
	})
	
	b.Define("recomd_service.client", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin workflow/ir_workflowservice.go
		var client hotelreservation.RecommendationService
		err := n.Get("recomd_service.client.ot", &client)
		return client, err
	})
	
	b.Define("recomd_service.client.ot", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var client ot.RecommendationService_OTServerWrapperInterface
		if err := n.Get("recomd_service.grpc_client", &client); err != nil {
			return nil, err
		}
		
		var coll_client backend.Tracer
		if err := n.Get("jaeger.client", &coll_client); err != nil {
			return nil, err
		}
		
		return ot.New_RecommendationService_OTClientWrapper(n.Context(), client, coll_client)
	})
	
	b.Define("recomd_service.grpc_client", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var addr string
		if err := n.Get("recomd_service.grpc.dial_addr", &addr); err != nil {
			return nil, err
		}
		
		return grpc.New_RecommendationService_GRPCClient(n.Context(), addr)
	})
	
	b.Define("reserv_service.client", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin workflow/ir_workflowservice.go
		var client hotelreservation.ReservationService
		err := n.Get("reserv_service.client.ot", &client)
		return client, err
	})
	
	b.Define("reserv_service.client.ot", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var client ot.ReservationService_OTServerWrapperInterface
		if err := n.Get("reserv_service.grpc_client", &client); err != nil {
			return nil, err
		}
		
		var coll_client backend.Tracer
		if err := n.Get("jaeger.client", &coll_client); err != nil {
			return nil, err
		}
		
		return ot.New_ReservationService_OTClientWrapper(n.Context(), client, coll_client)
	})
	
	b.Define("reserv_service.grpc_client", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var addr string
		if err := n.Get("reserv_service.grpc.dial_addr", &addr); err != nil {
			return nil, err
		}
		
		return grpc.New_ReservationService_GRPCClient(n.Context(), addr)
	})
	
	b.Define("search_service.client", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin workflow/ir_workflowservice.go
		var client hotelreservation.SearchService
		err := n.Get("search_service.client.ot", &client)
		return client, err
	})
	
	b.Define("search_service.client.ot", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var client ot.SearchService_OTServerWrapperInterface
		if err := n.Get("search_service.grpc_client", &client); err != nil {
			return nil, err
		}
		
		var coll_client backend.Tracer
		if err := n.Get("jaeger.client", &coll_client); err != nil {
			return nil, err
		}
		
		return ot.New_SearchService_OTClientWrapper(n.Context(), client, coll_client)
	})
	
	b.Define("search_service.grpc_client", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var addr string
		if err := n.Get("search_service.grpc.dial_addr", &addr); err != nil {
			return nil, err
		}
		
		return grpc.New_SearchService_GRPCClient(n.Context(), addr)
	})
	
	b.Define("user_service.client", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin workflow/ir_workflowservice.go
		var client hotelreservation.UserService
		err := n.Get("user_service.client.ot", &client)
		return client, err
	})
	
	b.Define("user_service.client.ot", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var client ot.UserService_OTServerWrapperInterface
		if err := n.Get("user_service.grpc_client", &client); err != nil {
			return nil, err
		}
		
		var coll_client backend.Tracer
		if err := n.Get("jaeger.client", &coll_client); err != nil {
			return nil, err
		}
		
		return ot.New_UserService_OTClientWrapper(n.Context(), client, coll_client)
	})
	
	b.Define("user_service.grpc_client", func(n *golang.Namespace) (any, error) {
		// Auto-generated by the golang plugin gogen/namespacebuilder.go
		var addr string
		if err := n.Get("user_service.grpc.dial_addr", &addr); err != nil {
			return nil, err
		}
		
		return grpc.New_UserService_GRPCClient(n.Context(), addr)
	})
	
}
